process HLTMuonOfflineAnalysis  = {

 include "Configuration/StandardSequences/data/FakeConditions.cff"
#   include "HLTrigger/Configuration/data/rawToDigi/frontierCablingSetup.cff"

#----------------- Input file ---------RAW file-----------------------
  untracked PSet maxEvents = {untracked int32 input = 5000}
  source = PoolSource{
    untracked uint32 skipEvents=0
    untracked vstring fileNames ={
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/20279FC3-C480-DC11-B65F-000423D6B328.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/42FE834D-B780-DC11-8C70-000423D9939C.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/5808BE4E-B27F-DC11-B565-000423D94534.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/684530C4-B47F-DC11-AE4C-000423D94534.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/72071364-D880-DC11-B1AB-001617DF785A.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/78D557AD-B37F-DC11-98DB-000423D944F8.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/8041A9FD-B17F-DC11-8BD4-000423D944F8.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/841B752E-AF7F-DC11-B0C3-000E0C3F094A.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/9C6799AF-3B80-DC11-A5B3-00304885ABA0.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/ACFDBB00-B47F-DC11-84B4-000423D944F8.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/C6786047-BA80-DC11-BB5A-000423D9870C.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/CAF5ACA3-1182-DC11-8950-000423D6B1CC.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/DE1D1B93-B17F-DC11-9FBD-000423D99BF2.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/F2B17516-B37F-DC11-8B4E-000423D98834.root',
'/store/mc/2007/10/20/RelVal-RelValZMM-1192895175/0000/F8AE8F11-3081-DC11-A582-000423D98DD4.root'
    }
  }

# One must change "HLTrigger/Configuration/data/common/HLTSetup.cc" to take case1 instead of default case2
  include "HLTrigger/Configuration/data/main/Muon.cff"
  service = TimerService {}
  module theTimer = myTimer from "HLTrigger/Timer/data/timer.cfi"	


# module debug=EventContentAnalyzer{}

#------------ Efficiency/Rate Analyzer --------------------------------
 
  module RateAnalyzer = MuonTriggerRateTimeAnalyzer {
      bool UseMuonFromGenerator=true
      bool UseMuonFromReco=true
      untracked InputTag GenLabel=source
      untracked InputTag RecoLabel=globalMuons
      double MaxTime=150.
      uint32 TimeNbins=150
      InputTag TriggerResultLabel = TriggerResults::HLTMuonOfflineAnalysis
      InputTag TimerLabel = theTimer::HLTMuonOfflineAnalysis
      untracked PSet TimingModules={
      untracked vstring MuonDigiModules = {}
      untracked vstring CaloDigiModules = {}
      untracked vstring TrackerDigiModules = {}
      untracked vstring MuonLocalRecModules = {"dt1DRecHits","dt4DSegments","rpcRecHits","csc2DRecHits","cscSegments"}
      untracked vstring MuonL2RecModules = {"hltL2MuonSeeds","hltL2Muons","hltL2MuonCandidates","SingleMuIsoL2PreFiltered"}
      untracked vstring CaloRecModules = {"ecalRegionalMuonsWeightUncalibRecHit","ecalRegionalMuonsRecHit","ecalPreshowerRecHit","hbhereco","horeco","hfreco","towerMakerForMuons","caloTowersForMuons"}
      untracked vstring MuonL2IsoModules = {"hltL2MuonIsolations","SingleMuIsoL2IsoFiltered"}
      untracked vstring TrackerRecModules = {"siPixelClusters","siPixelRecHits","siStripClusters"}
      untracked vstring MuonL3RecModules = {"hltL3Muons","hltL3MuonCandidates","SingleMuIsoL3PreFiltered"}
      untracked vstring MuonL3IsoModules = {"pixelTracks","hltL3MuonIsolations","SingleMuIsoL3IsoFiltered"}	
      }
      VPSet TriggerCollection = {
      	 {
          InputTag L1CollectionLabel = SingleMuIsoL1Filtered
          VInputTag HLTCollectionLabels = {   
            SingleMuIsoL2PreFiltered, SingleMuIsoL2IsoFiltered
          , SingleMuIsoL3PreFiltered, SingleMuIsoL3IsoFiltered
         }	  
     	  double L1ReferenceThreshold = 7.
     	  double HLTReferenceThreshold = 11.
	  uint32 NumberOfObjects = 1
         },
      	 {
          InputTag L1CollectionLabel = SingleMuNoIsoL1Filtered
          VInputTag HLTCollectionLabels = {   
            SingleMuNoIsoL2PreFiltered, SingleMuNoIsoL3PreFiltered 
          }	  
     	  double L1ReferenceThreshold = 7.
     	  double HLTReferenceThreshold = 16.
	  uint32 NumberOfObjects = 1
         },
      	 {
          InputTag L1CollectionLabel = DiMuonNoIsoL1Filtered
          VInputTag HLTCollectionLabels = {   
            DiMuonNoIsoL2PreFiltered, DiMuonNoIsoL3PreFiltered
         }	  
     	  double L1ReferenceThreshold = 3.
     	  double HLTReferenceThreshold = 3.
	  uint32 NumberOfObjects = 2
         },
      	 {
          InputTag L1CollectionLabel = DiMuonIsoL1Filtered
          VInputTag HLTCollectionLabels = {   
            DiMuonIsoL2PreFiltered,DiMuonIsoL2IsoFiltered,
	    DiMuonIsoL3PreFiltered,DiMuonIsoL3IsoFiltered
         }	  	
     	  double L1ReferenceThreshold = 3.
     	  double HLTReferenceThreshold = 3.
	  uint32 NumberOfObjects = 2
         },
      	 {
          InputTag L1CollectionLabel = JpsiMML1Filtered
          VInputTag HLTCollectionLabels = {   
            JpsiMML2Filtered,JpsiMML3Filtered
         }	  	
     	  double L1ReferenceThreshold = 3.
     	  double HLTReferenceThreshold = 3.
	  uint32 NumberOfObjects = 2
         },
      	 {
          InputTag L1CollectionLabel = ZMML1Filtered
          VInputTag HLTCollectionLabels = {   
            ZMML2Filtered,ZMML3Filtered
         }	  	
     	  double L1ReferenceThreshold = 3.
     	  double HLTReferenceThreshold = 7.
	  uint32 NumberOfObjects = 2
         }
       }
      # Shift to go to 90% efficiency pt values (in number of sigmas for 1/pt) 
      # ORCA values: 3.9 sigmas for L2; 2.2 sigmas for L3
      untracked vdouble NSigmas90 = { 3.9, 3.9, 2.2, 2.2 }

      # CrossSection (in nb) = generator cross section * filter efficiency
#      double CrossSection = 79300000
      double CrossSection = .97

      # Luminosity (in 1/cm**2/s units)
      untracked double Luminosity = 1.e32

      # Parameters defining histogram limits and number of bins
      untracked double PtMin = 0.0
      untracked double PtMax = 40.0
      untracked uint32 Nbins = 40

      # Output Root file for histograms
      untracked string RootFileName = "ZmumuAnalyzer.root"
  }

#------------ Message Logger ------------------------------------------
   service = MessageLogger {
    untracked vstring destinations = { "cout","HLTMuonVal.log" }
    untracked vstring categories =  {  "HLTMuonVal" }
    untracked vstring debugModules =  { "RateAnalyzer" }   
    untracked PSet HLTMuonVal.log = {untracked string threshold = "INFO"
                                   untracked PSet default = { untracked int32 limit = 0 }
                                   untracked PSet HLTMuonVal  = { untracked int32 limit = 100000}
    }
    untracked PSet cout = { untracked string threshold = "WARNING" } 
   }

#------------ End path ------------------------------------------------
  module out=PoolOutputModule{
        untracked string fileName = "output.root" 
        untracked vstring outputCommands = { "drop *",
					     "keep *_*_*_HLTMuonOfflineAnalysis"}
}
  endpath analyzerpath = {theTimer,RateAnalyzer}
}
